RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
RMCars bound to TM
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
RMCars bound to TM
RMCars bound to TM
RMCars bound
RMCars bound to TM
RMCars bound to TM
RMCars bound
RMCars bound to TM
RMCars bound to TM
RMCars bound
RMCars bound to TM
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
Got here
Want WRITE, have READ, requesting lock upgrade
Converting lock...done
 B4  Sizeof v1 :0 Size of v3 : 0
AFTR Sizeof v1 :0 Size of v3 : 1
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
Transaction 1 aborted
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
Transaction 2 aborted
Current transaction id 3
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
Now the car ct is 295
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 3
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
Got here
Want WRITE, have READ, requesting lock upgrade
Converting lock...done
 B4  Sizeof v1 :0 Size of v3 : 0
AFTR Sizeof v1 :0 Size of v3 : 1
SFO CAR
B41
Added
Aft41
John CUS
B41
Added
Aft41
Committing RM_CARS
Current transaction id 3
3  SFO
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 3
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 3
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
Got here
Want WRITE, have READ, requesting lock upgrade
Converting lock...done
 B4  Sizeof v1 :0 Size of v3 : 0
AFTR Sizeof v1 :0 Size of v3 : 1
Invalid location
SFO CAR
B41
Added
Aft41
John CUS
B41
Added
Aft41
Committing RM_CARS
Current transaction id 3
3  SFO
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
RMCars bound to TM
RMCars bound
RMCars bound to TM
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 3
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 3
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
Current transaction id 3
Want READ, someone has WRITE
lockmgr.DeadlockException: The transaction 3 is deadlocked:Sleep timeout...deadlock.
	at lockmgr.LockManager.cleanupDeadlock(LockManager.java:382)
	at lockmgr.LockManager.waitLock(LockManager.java:359)
	at lockmgr.LockManager.lock(LockManager.java:109)
	at transaction.ResourceManagerImpl.queryCarsPrice(ResourceManagerImpl.java:2279)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:324)
	at sun.rmi.transport.Transport$1.run(Transport.java:200)
	at sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
Got here
Want WRITE, have READ, requesting lock upgrade
Converting lock...done
 B4  Sizeof v1 :0 Size of v3 : 0
AFTR Sizeof v1 :0 Size of v3 : 1
RMCars bound to TM
RMCars bound
RMCars bound to TM
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 3
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
Got here
Want WRITE, have READ, requesting lock upgrade
Converting lock...done
 B4  Sizeof v1 :0 Size of v3 : 0
AFTR Sizeof v1 :0 Size of v3 : 1
RMCars bound to TM
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
RMCars bound to TM
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 1
SFO CAR
B41
Added
Aft41
Committing RM_CARS
Current transaction id 2
SFO CAR
B41
Added
Aft41
Committing RM_CARS
RMCars bound to TM
RMCars bound
RMCars bound to TM
Current transaction id 3
RMCars bound to TM
RMCars bound
RMCars bound to TM
